<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PMC</title>
    <link rel="icon" href="png/pmcjpeg.png" type="image/x-icon">
    <link rel="icon" href="png/pmcjpeg.png" type="image/x-icon">
    <link rel="stylesheet" href="data.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">

</head>

<body>

    <div class="card">
        <div class="card-header d-flex justify-content-between">
            
            <a class="btn btn-outline-primary"   id="goBackButton">Go Back</a>
            <h5>Data Page</h5>
            <a class="btn btn-outline-success"   href="dashboard.html">explore map</a>


        </div>
      
        <div class="card-content">
            <table id="data-table">
                <!-- Table content will be populated dynamically -->
            </table>
        
        </div>

    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        const API_URL = "http://localhost/autodcr/";
        document.getElementById('goBackButton').addEventListener('click', function() {
        localStorage.clear(); 
        window.location.href = 'index.html'; 
    });
        var lastInsertedId = localStorage.getItem("lastInsertedPlotBoundaryId");
        console.log(lastInsertedId, "lastInsertedId--------------")
  

        var table = $('#data-table');
        $(document).ready(function () {
            var properties = localStorage.getItem('properties');
            var cqlFilter = localStorage.getItem('cqlFilter');
            var coordinates = localStorage.getItem('coordinates');

        });

        $.ajax({
            url: API_URL + "APIS/get_plot_boundary.php", // Path to the PHP script
            type: "GET",
            data: { id: lastInsertedId },
            dataType: "json",
            success: function (response) {
                console.log(response);
                table.append('<tr><td>Draw Village Name</td><td>' + response?.data?.village_name + '</td></tr>');
                table.append('<tr><td>Selected Village From Dropdown</td><td>' + response?.data?.selectedvillage + '</td></tr>');
                table.append('<tr><td>Selected Gut Number From Dropdown</td><td>' + response?.data?.selectedguts + '</td></tr>');
                table.append('<tr><td>Coordinates</td><td>' + response?.data?.coordinates + '</td></tr>');

            },
            error: function (error) {
                console.error("AJAX request failed:", error);
            },
        });
    </script>

</body>

</html>